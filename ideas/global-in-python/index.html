<!DOCTYPE html>

<html lang="en" dir="ltr">
	<head>
		<title>
			Scoping and use of the &#039;global&#039; keyword in Python - Stereochrome
		</title>

		<meta name="Author" content="Keith Gaughan">
		<meta name="Copyright" content="Copyright (c) Keith Gaughan, 2001-2019">

		<link rel="shortcut icon" type="image/x-icon" href="https://stereochro.me/favicon.ico"><link rel="stylesheet" type="text/css" media="screen" href="https://stereochro.me/assets/screen.css"><link rel="stylesheet" type="text/css" media="print" href="https://stereochro.me/assets/print.css">
<link rel="stylesheet" type="text/css" media="screen" href="https://stereochro.me/assets/prettify.css">

		<style type="text/css" media="handheld">
		#content, #footer, #masthead {
			width: 22em;
			font-size: 200%;
		}
		</style>
	</head>
	<body class="">
		<div id="masthead"><a href="https://stereochro.me/">stereochro<span>me</span></a></div>
		<div id="outer1">
			<div id="content">
				
		<h1>Scoping and use of the &#039;global&#039; keyword in Python</h1>

	<p><em>Here&#8217;s something I knocked up for one of my co-workers who&#8217;s an experienced developer, but a Python neophyte. It may be useful to others.</em></p>

<div class="hr"><hr></div>

<p>As in PHP, the &#8216;global&#8217; keyword in Python declares that any reference to a
given variable name within the scope of a function or method refers to a
variable in module/global scope. However, the scoping behaviour of the two
languages differs subtly.</p>

<p>In PHP, variables within a function or method are local unless declared as
global. With Python, the behaviour is more subtle. Firstly, let&#8217;s take a
simple case:</p>

<pre class="prettyprint"><code>foo = 0

def bar():
    print "In bar(), foo is", foo

bar()
print "And in module scope, foo is", foo
</code></pre>

<p>This will result in:</p>

<pre>
In bar(), foo is 0
And in module scope, foo is 0
</pre>

<p>However, if we try to modify foo without declaring it global:</p>

<pre class="prettyprint"><code>foo = 0

def bar():
    print "Entering bar(), foo is", foo
    foo += 1
    print "Leaving bar(), foo is", foo

bar()
print "And in module scope, foo is", foo
</code></pre>

<p>You&#8217;ll get an error:</p>

<pre>
Entering bar(), foo is
Traceback (most recent call last):
  File "globaltest.py", line 8, in <module>
    bar()
  File "globaltest.py", line 4, in bar
    print "Entering bar(), foo is", foo
UnboundLocalError: local variable 'foo' referenced before assignment
</pre>

<p>This is because module/global scope is a read-only shadow within the local
function/method scope: you can access it, providing there&#8217;s nothing
declared with the same name in local scope, but you can&#8217;t change it. There
are very good, though non-trivial[^sugar], reasons for this behaviour.</p>

<p>If you <em>specifically</em> want to be able to change the value a given variable in
the global scope contains, then use the &#8216;global&#8217; keyword.</p>

<pre class="prettyprint"><code>foo = 0

def bar():
    global foo
    print "Entering bar(), foo is", foo
    foo += 1
    print "Leaving bar(), foo is", foo

bar()
print "And in module scope, foo is", foo
</code></pre>

<p>Which yields:</p>

<pre>
Entering bar(), foo is 0
Leaving bar(), foo is 1
And in module scope, foo is 1
</pre>

<p>However, if all you want to do is access methods on the object the variable
contains a reference to, &#8216;global&#8217; isn&#8217;t needed, and should be avoided.</p>

<p>[^sugar]: In a nutshell, functions types and modules are just regular objects, no different from any other object, and when you declare a function or class, or import a module, you&#8217;re just using some syntactic sugar around a variable assignment. If Python behaved like PHP, you&#8217;d need to do stuff like this:</p>

<pre class="prettyprint"><code>    def boogie():
        print "I'm dancing, I'm dancing!"

    def claptrap():
        # 'boogie' is a variable that contains a reference to the function
        # object declared above.
        global boogie
        print "Come on everybody check me out."
        boogie()

    claptrap()

Also, Python are simply pigeonholes for holding references to objects; variables are not the objects they contain and everything, even number and strings, are objects. Variables containing immutable objects like numbers and strings may appear to act otherwise, but this is simply because those types of object are immutable.
</code></pre>

	<div id="metadata">
		Created at 17:34 UTC on August 31st, 2010					and last modified at 18:03 UTC on August 31st, 2010			</div>
				</div>
		</div>
		<div id="outer2">
			<div id="footer">
				<hr>
				<a href="http://en.wikipedia.org/wiki/Hacker_(programmer_subculture)"><img src="https://stereochro.me/assets/images/glider.png" style="float:right" width="55" height="55" alt="Hacker"></a>
								<ul id="nav">
					<li><a href="https://stereochro.me/">Home</a></li>
					<li><a href="https://stereochro.me/about">About</a></li>
					<li><a href="https://stereochro.me/weblog/">Weblog</a></li>
					<li><a href="https://stereochro.me/projects">Projects</a></li>
					<li><a href="https://stereochro.me/colophon">Colophon</a></li>
					<li><a href="https://stereochro.me/sitemap">Sitemap</a></li>
				</ul>
				<address>
					Copyright &copy; Keith Gaughan, 2001&#8210;2019.
					All Rights Reserved.
					You can stop reading now.
				</address>
				<p>
<a href="//ipv6ready.ie/verify/d64e5fedaefdb41b1a0b198d4a4faa7a3cf832de">
  <img width="120" height="20"
	src="//d-badges.ipv6ready.ie/d/64/e5/fe/d64e5fedaefdb41b1a0b198d4a4faa7a3cf832de-s.png"
	alt="[IPv6 Ready]">
</a>
				</p>
			</div>
		</div>
		<script type="text/javascript" src="https://stereochro.me/assets/prettify.js"></script>
<script type="text/javascript">prettyPrint();</script>			</body>
</html>
